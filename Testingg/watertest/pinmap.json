{
  "system": {
    "controller": "Raspberry Pi 4 Model B",
    "language": "Python 3",
    "expander": "MCP23017 (I2C, 0x20)",
    "adc": "MCP3008 (SPI)"
  },
  "raspberry_pi": {
    "i2c": {
      "SDA": 2,
      "SCL": 3
    },
    "spi": {
      "MISO": 9,
      "MOSI": 10,
      "SCLK": 11,
      "CE0": 8
    },
    "tm1637_displays": {
      "slot1": { "clk": 5, "dio": 16 },
      "slot2": { "clk": 5, "dio": 21 },
      "slot3": { "clk": 5, "dio": 20 },
      "slot4": { "clk": 5, "dio": 4 }
    },
    "charging_relays": {
      "slot1_power": 17,
      "slot1_lock": 27,
      "slot2_power": 22,
      "slot2_lock": 23,
      "slot3_power": 24,
      "slot3_lock": 25,
      "slot4_power": 26,
      "slot4_lock": 19
    },
    "acs712_adc_channels": {
      "slot1": 0,
      "slot2": 1,
      "slot3": 2,
      "slot4": 3
    },
    "coin_acceptor": {
      "signal": 7,
      "type": "Pulse output"
    },
    "ultrasonic_sensor": {
      "trig": 6,
      "echo": 12
    }
  },
  "mcp23017_expander": {
    "address": "0x20",
    "i2c_bus": 1,
    "gpa": {
      "GPA0": { "function": "flow_sensor_signal", "direction": "input", "description": "YF-S201 flow sensor pulses" },
      "GPA1": { "function": "tank_level_low", "direction": "input", "description": "Low water level (active LOW)" },
      "GPA2": { "function": "tank_level_high", "direction": "input", "description": "Full water level (active LOW)" },
      "GPA3": { "function": "spare", "direction": "input" },
      "GPA4": { "function": "spare", "direction": "input" },
      "GPA5": { "function": "spare", "direction": "input" },
      "GPA6": { "function": "spare", "direction": "output" },
      "GPA7": { "function": "spare", "direction": "output" }
    },
    "gpb": {
      "GPB0": { "function": "pump_relay", "direction": "output", "description": "12V pump via 5V relay" },
      "GPB1": { "function": "solenoid_valve", "direction": "output", "description": "12V solenoid valve via 5V relay" },
      "GPB2": { "function": "spare", "direction": "output" },
      "GPB3": { "function": "spare", "direction": "output" },
      "GPB4": { "function": "spare", "direction": "output" },
      "GPB5": { "function": "spare", "direction": "output" },
      "GPB6": { "function": "spare", "direction": "output" },
      "GPB7": { "function": "spare", "direction": "output" }
    }
  },
  "legacy_mapping": {
    "_comment": "Old Pi-only layout for reference (deprecated)",
    "tank_level": { "tank1": 2, "tank2": 3 },
    "water_flow": 14,
    "pump_relay_old": 13,
    "rfid": "USB",
    "free_gpio": [15, 18]
  }
}
